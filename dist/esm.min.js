var N=e=>e==null,j=e=>e===!0||e===!1,x=e=>N(e)?null:e.toString(),A=e=>j(e)?e?"":null:x(e),z=e=>document.createElement(e.tag),O=e=>document.createElementNS("http://www.w3.org/2000/svg",e.tag),L=e=>[],Q=String.fromCharCode,{from:$,isArray:w,of:ee}=Array,{MAX_VALUE:te,NEGATIVE_INFINITY:re,POSITIVE_INFINITY:ne,isFinite:se,isInteger:oe,isNaN:le,parseFloat:ae,parseInt:ie}=Number,{random:pe}=Math,{assign:v,defineProperty:ce,entries:y,fromEntries:E,keys:de,getPrototypeOf:ue,values:me}=Object,_e=Date.now,{iterator:he,toStringTag:ye}=Symbol,{assert:fe,clear:be,debug:ge,dir:Se,error:M,log:ve,table:Ee}=console,{now:Ie}=performance,D=e=>typeof e=="function",H=(e,t,...r)=>e[t].bind(e,...r),W=globalThis.customElements,u=Symbol(1),m=Symbol(1),_=Symbol(1),f=Symbol(1),b=Symbol(1),g=Symbol(1),I=e=>{let{[m]:t,[_]:r,[f]:n,[b]:o,[g]:a,[u]:l,...p}=e??{};return{[m]:t,[_]:r,[f]:n,[b]:o,[g]:a,[u]:{...p,...l}}},V=e=>{let{[u]:t={},[m]:r={},[_]:n={},style:o,init:a,clean:l,...p}=e??{},h=E(y(p).filter(([i,s])=>{if(i.startsWith("on:"))r[i.slice(3)]=s;else if(i.startsWith("set:"))n[i.slice(4)]=s;else if(i.startsWith("attr:"))t[i.slice(5)]=s;else return!0}));return v(h,{[u]:t,[m]:r,[_]:n,[f]:o,[b]:a,[g]:l})},Z=class{constructor(e){}bindMethod(e){return H(this,e)}},C=Symbol(1),Y=Symbol(1),G=Symbol(1),k=e=>typeof e!="symbol",R=class extends Z{zones=[];configs={};constructor(e){super(),this.setDefaultZone(...e?.default??[])}setDefaultZone(...e){this.zones[0]=e}pushZone(...e){return this.zones.push(e),Y}popZone(){let e=this.zones;return e.length>1&&e.pop(),G}seekZone(){return this.zones.at(-1)}test(e,t){for(let r of this.seekZone())if(r.test(e,t))return!0;return!1}h(e,t,...r){for(let n of this.seekZone())if(n===void 0&&M(0),n.test(e,t)){let o=r.flat(1).filter(k);return n.h(e,t,...o)}M(0,e)}static create(e){let t=new this(e);return{h:t.bindMethod("h"),Fragment:C,setDefaultZone:t.bindMethod("setDefaultZone"),pushZone:t.bindMethod("pushZone"),popZone:t.bindMethod("popZone")}}},B=class extends R{h(e,t,...r){return super.h(e,V(t),...r)}},T=class{parent;constructor(e){this.parent=e}setStyle(e){let t=this.parent.style;e=E(y(e).filter(([r,n])=>r.startsWith("--")?(n!==void 0&&t.setProperty(r,n),!1):!0)),v(t,e)}clearStyle(){let e=this.parent.style,t=[...e],r=E(t.filter(n=>n.startsWith("--")?(e.removeProperty(n),!1):!0).map(n=>[n,""]));v(e,r)}},U=class{sheet;stylables;style_cls;constructor(e=new CSSStyleSheet,t=T){this.sheet=e,this.style_cls=t;let r=[...e.cssRules].map(n=>[n.selectorText,new t(n)]);this.stylables=new Map(r)}getSheet(){return this.sheet}getRule(e){return this.stylables.get(e)}setRule(e,t={}){let r=this.getRule(e);if(!r){let n=this.sheet,o=this.style_cls;n.replaceSync(e+` { }
`),r=new o([...n.cssRules].find(a=>a.selectorText===e)),this.stylables.set(e,r)}return r.setStyle(t),r}delRule(e){let t=this.stylables;return t.get(e)?.clearStyle(),t.delete(e)}renameSelector(e,t){let r=this.stylables,n=r.get(e);if(n)return n.parent.selectorText=t,r.delete(e),r.set(t,n),n}},S=class extends Z{test(e,t){return D(e)}h(e,t,...r){let{[u]:n={},[m]:o={},[_]:a={},[f]:l,[b]:p,[g]:h,...i}=t??{};r=r.map(c=>this.processChild(c));let s=e(i);if(w(s))return s.push(...r),s;for(let[c,d]of y(n))this.addAttr(s,c,d);for(let[c,d]of y(o)){let[F,P]=w(d)?d:[d];this.addEvent(s,c,F,P)}for(let[c,d]of y(a))this.setMember(s,c,d);return l&&this.setStyle(s,l),p&&this.runOnInit(s,p),s.append(...r),s}addAttr(e,t,r){let n=t instanceof Attr,o=A(r),a=N(o),l=n?t:(e.setAttribute(t,o??""),e.getAttributeNode(t));return n&&!a&&(l.nodeValue=o,e.setAttributeNode(l)),a&&(e.removeAttributeNode(l),l.nodeValue=o),l}addEvent(e,t,r,n){e.addEventListener(t,r,n)}setMember(e,t,r){e[t]=r}setStyle(e,t){let r=new T(e);return r.setStyle(t),r}runOnInit(e,t){t(e)}runOnClean(e,t){t(e)}processChild(e){return e}},X=class extends S{test(e,t){return typeof e=="string"}h(e,t,...r){return super.h(z,{tag:e,...I(t)},...r)}},q=class extends S{test(e,t){return typeof e=="string"}h(e,t,...r){return super.h(O,{tag:e,...I(t)},...r)}},J=class extends S{test(e,t){return e==="template"}h(e,t,...r){let{id:n,is:o,shallow:a=!1,sheets:l=[]}=t,p=document.createElement("template"),h=p.content,i=class extends HTMLElement{constructor(){super();let s=this.attachShadow({mode:"open"});s.adoptedStyleSheets.push(...l),s.appendChild(h.cloneNode(!a))}};return W.define(n,i,{extends:o}),super.h(()=>h,{},...r),p}},K=class extends S{test(e,t){return e===C}h(e,t,...r){return super.h(L,{},...r)}};export{u as ATTRS,T as DynamicStylable,U as DynamicStyleSheet,m as EVENTS,R as HyperZone,B as InlineHyperZone,_ as MEMBERS,g as ONCLEAN,b as ONINIT,f as STYLE,S as VanillaComponentRender,K as VanillaFragmentRender,X as VanillaHTMLRender,q as VanillaSVGElementRender,J as VanillaTemplateRender,V as inlinePropsRemapper,I as normalizeAttrProps,x as stringify,A as stringifyAttrValue};
